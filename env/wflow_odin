#%Module

proc ModulesHelp { } {
   put stderr "This module loads python environement for running SRW on"
   put stderr "the NOAA RDHPC machine Hera"
}

module-whatis "Loads libraries needed for running SRW on Hera"

if { [module-info mode load] } {
  # >>> conda initialize >>>
  # !! Contents within this block are managed by 'conda init' !!
  set cmd_init {\
__conda_setup="$('/scratch/software/Odin/python/anaconda2/bin/conda' 'shell.bash' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "/scratch/software/Odin/python/anaconda2/etc/profile.d/conda.sh" ]; then
        . "/scratch/software/Odin/python/anaconda2/etc/profile.d/conda.sh"
    else
        export PATH="/scratch/software/Odin/python/anaconda2/bin:$PATH"
    fi
fi
unset __conda_setup
  }
  puts $cmd_init
  # <<< conda initialize <<<

  # To make "regional_workflow" avaiable,
  # you should uncomment the following lines, which create file ".condarc"
  # or install the environment yourself.
  # 
#  set cmd {\
#cat > $HOME/.condarc <<EOF
#envs_dirs:
#  - /home/yunheng.wang/.conda/envs
#EOF
#  }
#  puts $cmd
  
  puts "conda config --set changeps1 False;"
  puts "conda activate regional_workflow;"
}

if {[module-info mode remove]} {
  puts "conda deactivate;"
}
